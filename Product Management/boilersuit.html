<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boiler Suits - Safpro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="logo">SAFPRO INDIA</div>
            <ul>
                <li><a href="index.html">Back to Home</a></li>
            </ul>
        </div>
    </nav>

    <!-- Boiler Suit Types Section -->
    <section class="helmet-section">
        <div class="container">
            <h2 class="section-title">Boiler Suits</h2>
            <div class="helmet-grid">
                <div class="helmet-card">
                    <div class="image-scroll-container">
                        <img src="items/orange_suit.jpeg" alt="Orange Boiler Suit 1" class="helmet-image" onclick="openOrderForm('Orange Boiler Suit')">
                    </div>
                    <div class="product-details">
                        <h3 class="helmet-caption">Orange Boiler Suit</h3>
                        <p class="product-price">₹600</p>
                        <p class="product-desc">High-visibility orange coverall for industrial work environments</p>
                    </div>
                </div>

                <div class="helmet-card">
                    <div class="image-scroll-container">
                        <img src="items/blue_suit.jpeg" alt="Blue Boiler Suit 2" class="helmet-image" onclick="openOrderForm('Blue Boiler Suit')">
                    </div>
                    <div class="product-details">
                        <h3 class="helmet-caption">Blue Boiler Suit</h3>
                        <p class="product-price">₹600</p>
                        <p class="product-desc">Durable blue coverall with multiple pockets for tool storage</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Order Form Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeOrderForm()">&times;</span>
            <h2>Order Form</h2>
            <form id="orderForm" onsubmit="handleOrderSubmit(event)">
                <input type="hidden" id="productName" name="productName">
                
                <div class="form-group">
                    <label for="orderName">Name *</label>
                    <input type="text" id="orderName" name="name" required>
                </div>

                <div class="form-group">
                    <label for="orderEmail">Email *</label>
                    <input type="email" id="orderEmail" name="email" required>
                </div>

                <div class="form-group">
                    <label for="orderWhatsapp">WhatsApp Number *</label>
                    <div class="phone-input-group">
                        <input type="text" id="orderWhatsapp" 
                        pattern="^(\+91|91)?[6-9][0-9]{9}$" 
                        maxlength="13"
                        placeholder="Enter WhatsApp number"
                        required>
                    </div>
                    <span class="error-message" id="orderWhatsappError"></span>
                </div>

                <div class="form-group">
                    <label for="orderQuantity">Quantity *</label>
                    <input type="number" id="orderQuantity" name="quantity" min="1" required>
                </div>

                <div class="form-group">
                    <label for="orderAddress">Address *</label>
                    <input type="text" id="orderAddress" name="address" required>
                </div>

                <button type="submit" class="submit-button">Order Item</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Safpro - Safety Product Management. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // WhatsApp validation
        document.getElementById('orderWhatsapp').addEventListener('input', function(e) {
            const errorSpan = document.getElementById('orderWhatsappError');
            const value = e.target.value;

            const indiaPattern = /^(\+91|91)?[6-9][0-9]{9}$/;

            if (!indiaPattern.test(value)) {
                errorSpan.textContent = 'Enter valid number';
                errorSpan.style.display = 'block';
                e.target.setCustomValidity('Invalid number');
            } else {
                errorSpan.textContent = '';
                errorSpan.style.display = 'none';
                e.target.setCustomValidity('');
            }
        });

        function openOrderForm(productName) {
            document.getElementById('orderModal').style.display = 'flex';
            document.getElementById('productName').value = productName;
            document.body.style.overflow = 'hidden';
        }

        function closeOrderForm() {
            document.getElementById('orderModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('orderForm').reset();
        }

        function handleOrderSubmit(event) {
            event.preventDefault();
            
            const productName = document.getElementById('productName').value;
            
            // Define prices for each product
            const prices = {
                'Nape Fitting Helmet': '₹250',
                'Ratchet Fitting Helmet': '₹300',
                'Orange Boiler Suit': '₹850',
                'Blue Boiler Suit': '₹850',
                'Safety Jacket - For Labours': '₹450',
                'Safety Jacket - For Staff': '₹550',
                'Cotton Handglove': '₹50',
                'Leather Handgloves': '₹180',
                'Non-Woven Head Cap': '₹10',
                '3 Ply Nose Mask': '₹5',
                'Apron Leather': '₹400',
                'Tiger Lorex': '₹950',
                'Tiger Leopard': '₹980',
                'Malgre E-one': '₹850',
                'Rockland': '₹1100',
                'V4 Safe': '₹920',
                'Adzon': '₹890',
                'Safetag': '₹950',
                'Malgre Collarboot': '₹1050',
                'Pitbul': '₹1150',
                'Fire Son': '₹1200',
                'Simple Gumboot': '₹350',
                'Gumboot Steeltoe': '₹550',
                'Malgre Decor': '₹900',
                'Fuel Armer': '₹1080',
                'Fuel Flute': '₹1050',
                'Safari Pro': '₹1100',
                'VII Safe': '₹950',
                'Anchor': '₹980',
                'Karam': '₹1050',
                'Regar': '₹920',
                'Rider Leopard': '₹1000',
                'Rider Lorex': '₹1020',
                'Octopus Leopard': '₹1120',
                'Rio Tand': '₹890'
            };
            
            const formData = {
                product_name: productName,
                product_price: prices[productName] || 'Price not available',
                customer_name: document.getElementById('orderName').value,
                customer_email: document.getElementById('orderEmail').value,
                customer_address: document.getElementById('orderAddress').value,
                whatsapp_number: document.getElementById('orderWhatsapp').value,
                quantity: document.getElementById('orderQuantity').value
            };
            
            emailjs.send('service_ztpxumn', 'template_ed6gq7j', formData)
                .then(function(response) {
                    closeOrderForm();
                    showSuccessModal('Thank you for your order! We have received your order for ' + productName + '. Our team will contact you shortly to confirm the details.');
                }, function(error) {
                    alert('Failed to place order. Please try again.');
                    console.error('Error:', error);
                });
        }

        function showSuccessModal(message) {
            document.getElementById('successMessage').textContent = message;
            document.getElementById('successModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeSuccessModal() {
            document.getElementById('successModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('orderModal');
            if (event.target == modal) {
                closeOrderForm();
            }
        }
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
    (function(){
        emailjs.init("A9OAFr_THSguk7PDl"); // Replace with your public key
    })();
    </script>

    <!-- Success Modal -->
    <div id="successModal" class="success-modal">
        <div class="success-modal-content">
            <div class="success-checkmark">
                <svg viewBox="0 0 52 52">
                    <polyline points="14 27 22 35 38 19"/>
                </svg>
            </div>
            <h2 class="success-title">Order Placed!</h2>
            <p class="success-message" id="successMessage"></p>
            <button class="success-close-btn" onclick="closeSuccessModal()">OK</button>
        </div>
    </div>
</body>
</html>